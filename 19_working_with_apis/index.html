<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lec»õie: Working with APIs</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Sidebar fix -->
    <aside class="sidebar">
        <h2>Capitol 19: Working with APIs</h2>
        <nav class="side-nav">
            <ul>
                <li><a href="#api-intro" class="nav-link active">Ce este un API</a></li>
                <li><a href="#json-basics" class="nav-link">JSON basics</a></li>
                <li><a href="#fetch-advanced" class="nav-link">Fetch API avansat</a></li>
                <li><a href="#request-methods" class="nav-link">Request methods (GET, POST, PUT, DELETE)</a></li>
                <li><a href="#headers-body" class="nav-link">Headers »ôi Body</a></li>
                <li><a href="#api-auth" class="nav-link">API Key & autentificare</a></li>
                <li><a href="#workshop-products" class="nav-link">Workshop: API de produse</a></li>
                <li><a href="#workshop-weather" class="nav-link">Workshop: API meteo</a></li>
                <li><a href="#homework" class="nav-link">Tema: aplica»õie completƒÉ cu API</a></li>
            </ul>
        </nav>
    </aside>

    <!-- Con»õinut principal -->
    <main class="main-content">
        <header>
            <h1>Working with APIs</h1>
            <p>√én acest capitol vom explora cum func»õioneazƒÉ API-urile »ôi cum pot fi folosite √Æn aplica»õiile web moderne.</p>
        </header>

        <article id="api-intro">
            <h2>Ce este un API?</h2>
            <p>
                Un <strong>API (Application Programming Interface)</strong> este o interfa»õƒÉ care permite aplica»õiilor
                sƒÉ comunice √Æntre ele. Practic, un API oferƒÉ un set de reguli »ôi endpoint-uri prin care o aplica»õie
                poate cere sau trimite date cƒÉtre un server.
            </p>

            <pre>GET https://api.exemplu.com/products</pre>

            <p>
                RƒÉspunsul este, de obicei, √Æn format <code>JSON</code>, un format text u»ôor de citit »ôi prelucrat √Æn JavaScript.
            </p>

            <div class="info-box">
                <strong>üí° Exemplu real:</strong> C√¢nd folose»ôti o aplica»õie meteo, ea comunicƒÉ cu un API pentru a ob»õine temperatura curentƒÉ.
            </div>
        </article>

        <article id="json-basics">
            <h2>JSON Basics</h2>
            <p>
                <strong>JSON (JavaScript Object Notation)</strong> este formatul standard pentru schimbul de date √Æntre client »ôi server.
            </p>

            <h3>Structura JSON</h3>
            <pre>{
  "nume": "Ion Popescu",
  "varsta": 25,
  "activ": true,
  "skills": ["JavaScript", "React", "Node.js"],
  "adresa": {
    "oras": "Bucure»ôti",
    "strada": "Calea Victoriei"
  }
}</pre>

            <h3>Conversii JSON √Æn JavaScript</h3>
            <pre>// Convertire string JSON √Æn obiect JavaScript
const jsonString = '{"nume": "Maria", "varsta": 30}';
const obiect = JSON.parse(jsonString);

// Convertire obiect JavaScript √Æn string JSON
const data = { nume: "Alex", varsta: 28 };
const json = JSON.stringify(data);</pre>
        </article>

        <article id="fetch-advanced">
            <h2>Fetch API Avansat</h2>
            <p>
                <code>fetch()</code> este func»õia modernƒÉ pentru a face cereri HTTP √Æn JavaScript. ReturneazƒÉ un <strong>Promise</strong>.
            </p>

            <h3>Sintaxa de bazƒÉ</h3>
            <pre>fetch('https://api.exemplu.com/data')
  .then(response => response.json())
  .then(data => console.log(data))
  .catch(error => console.error('Eroare:', error));</pre>

            <h3>Folosind async/await</h3>
            <pre>async function getData() {
  try {
    const response = await fetch('https://api.exemplu.com/data');
    const data = await response.json();
    console.log(data);
  } catch (error) {
    console.error('Eroare:', error);
  }
}</pre>

            <div class="warning-box">
                <strong>‚ö†Ô∏è Aten»õie:</strong> √éntotdeauna verificƒÉ dacƒÉ cererea a avut succes folosind <code>response.ok</code> sau <code>response.status</code>.
            </div>
        </article>

        <article id="request-methods">
            <h2>Request Methods (GET, POST, PUT, DELETE)</h2>
            
            <h3>GET - Ob»õinere date</h3>
            <pre>fetch('https://api.exemplu.com/products/1')
  .then(response => response.json())
  .then(data => console.log(data));</pre>

            <h3>POST - Crearea unei resurse noi</h3>
            <pre>fetch('https://api.exemplu.com/products', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    nume: 'Produs Nou',
    pret: 99.99
  })
})
  .then(response => response.json())
  .then(data => console.log(data));</pre>

            <h3>PUT - Actualizare completƒÉ</h3>
            <pre>fetch('https://api.exemplu.com/products/1', {
  method: 'PUT',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    nume: 'Produs Actualizat',
    pret: 149.99
  })
});</pre>

            <h3>DELETE - »òtergere resursƒÉ</h3>
            <pre>fetch('https://api.exemplu.com/products/1', {
  method: 'DELETE'
})
  .then(response => console.log('»òters cu succes'));</pre>
        </article>

        <article id="headers-body">
            <h2>Headers »ôi Body</h2>
            
            <h3>Headers (Anteturi)</h3>
            <p>Headers con»õin metadate despre cerere, cum ar fi tipul de con»õinut sau token-uri de autentificare.</p>
            
            <pre>fetch('https://api.exemplu.com/data', {
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer token123',
    'Accept': 'application/json'
  }
});</pre>

            <h3>Body (Corp cerere)</h3>
            <p>Body-ul con»õine datele efective care sunt trimise cƒÉtre server √Æn metodele POST, PUT sau PATCH.</p>
            
            <pre>const userData = {
  username: 'ion_popescu',
  email: 'ion@exemplu.com',
  password: 'parola123'
};

fetch('https://api.exemplu.com/register', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(userData)
});</pre>
        </article>

        <article id="api-auth">
            <h2>API Key & Autentificare</h2>
            
            <p>Multe API-uri necesitƒÉ o <strong>cheie API (API Key)</strong> pentru a valida »ôi limita accesul.</p>

            <h3>Tipuri de autentificare</h3>
            <ul>
                <li><strong>API Key √Æn URL:</strong> <code>?api_key=abc123</code></li>
                <li><strong>API Key √Æn Header:</strong> <code>X-API-Key: abc123</code></li>
                <li><strong>Bearer Token:</strong> <code>Authorization: Bearer token123</code></li>
                <li><strong>Basic Auth:</strong> Username »ôi parolƒÉ encodate √Æn Base64</li>
            </ul>

            <h3>Exemplu cu API Key</h3>
            <pre>const apiKey = 'abc123xyz';

fetch(`https://api.exemplu.com/data?api_key=${apiKey}`)
  .then(response => response.json())
  .then(data => console.log(data));</pre>

            <h3>Exemplu cu Bearer Token</h3>
            <pre>const token = 'your_token_here';

fetch('https://api.exemplu.com/protected', {
  headers: {
    'Authorization': `Bearer ${token}`
  }
})
  .then(response => response.json())
  .then(data => console.log(data));</pre>

            <div class="warning-box">
                <strong>‚ö†Ô∏è Securitate:</strong> Nu expune niciodatƒÉ cheia API √Æn cod client public. Folose»ôte variabile de mediu sau un backend intermediar.
            </div>
        </article>

        <article id="workshop-products">
            <h2>Workshop: API de Produse</h2>
            <p>Vom folosi API-ul public <strong>FakeStore API</strong> pentru a ob»õine »ôi afi»ôa produse.</p>

            <div class="demo-box">
        <h4>Demo Interactiv - Produse</h4>

        <div class="controls">
          <div class="control-row">
            <button id="getProducts" class="btn-primary">Ob»õine toate produsele (limit 5)</button>
            <div class="hint">Afi»ôeazƒÉ o listƒÉ de produse de test. Folose»ôte pentru a vedea structura rƒÉspunsului.</div>
          </div>

          <div class="control-row">
            <label for="productId" class="sr-only">ID produs</label>
            <input type="number" id="productId" placeholder="ID produs (ex: 1)" value="1" min="1" max="20">
            <button id="getProduct" class="btn-secondary">Ob»õine produsul</button>
            <div class="hint">Introdu un ID »ôi apasƒÉ pentru a vedea detaliile acelui produs.</div>
          </div>

          <div class="control-row">
            <button id="getCategories" class="btn-primary">Ob»õine categorii</button>
            <select id="categorySelect">
              <option value="">SelecteazƒÉ categorie</option>
            </select>
            <button id="getByCategory" class="btn-secondary">FiltreazƒÉ</button>
            <div class="hint">Po»õi popula mai √Ænt√¢i lista de categorii, apoi filtra produsele dupƒÉ categorie selectatƒÉ.</div>
          </div>
        </div>

        <div class="result-box">
          <h5>Rezultate</h5>
          <div id="result" class="result-content">Rezultatul va apƒÉrea aici dupƒÉ ce ape»ôi un buton.</div>
        </div>
            </div>

            <h3>Cod sursƒÉ</h3>
            <pre>// Ob»õine toate produsele
async function getAllProducts() {
  const response = await fetch('https://fakestoreapi.com/products');
  const products = await response.json();
  console.log(products);
}

// Ob»õine un produs specific
async function getProduct(id) {
  const response = await fetch(`https://fakestoreapi.com/products/${id}`);
  const product = await response.json();
  console.log(product);
}

// Ob»õine produse dupƒÉ categorie
async function getProductsByCategory(category) {
  const response = await fetch(
    `https://fakestoreapi.com/products/category/${category}`
  );
  const products = await response.json();
  console.log(products);
}</pre>
        </article>

        <article id="workshop-weather">
            <h2>Workshop: API Meteo</h2>
            <p>Vom folosi <strong>Open-Meteo API</strong> (nu necesitƒÉ cheie API) pentru a ob»õine datele meteo.</p>

            <div class="demo-box">
                <h4>Demo Interactiv - Meteo</h4>
        <input type="text" id="city" placeholder="Ora»ô (ex: Bucure»ôti)" value="">
        <div style="margin:0.25rem 0; color:#4a5568; font-size:0.9rem">Sau folose»ôte coordonate:</div>
        <input type="text" id="latitude" placeholder="Latitudine" value="44.4268">
        <input type="text" id="longitude" placeholder="Longitudine" value="26.1025">
        <button id="getWeather">Ob»õine meteo</button>
                <div id="result2"></div>
            </div>

            <h3>Cod sursƒÉ</h3>
            <pre>async function getWeather(lat, lon) {
  const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`;
  
  try {
    const response = await fetch(url);
    const data = await response.json();
    
    const weather = data.current_weather;
    console.log(`TemperaturƒÉ: ${weather.temperature}¬∞C`);
    console.log(`VitezƒÉ v√¢nt: ${weather.windspeed} km/h`);
  } catch (error) {
    console.error('Eroare:', error);
  }
}</pre>
        </article>

        <article id="homework">
            <h2>Tema: Aplica»õie CompletƒÉ cu API</h2>
            
            <h3>Cerin»õe</h3>
            <p>CreeazƒÉ o aplica»õie web care folose»ôte un API public »ôi implementeazƒÉ urmƒÉtoarele func»õionalitƒÉ»õi:</p>
            
            <ul>
                <li>Afi»ôare listƒÉ de date (produse, utilizatori, postƒÉri, etc.)</li>
                <li>CƒÉutare »ôi filtrare dupƒÉ criterii</li>
                <li>Afi»ôare detalii pentru un element selectat</li>
                <li>Design responsive »ôi atractiv</li>
                <li>Gestionare erori (loading, mesaje de eroare)</li>
                <li>Bonus: Implementare POST/PUT/DELETE dacƒÉ API-ul permite</li>
            </ul>

            <h3>API-uri publice recomandate</h3>
            <ul>
                <li><a href="https://fakestoreapi.com" target="_blank">FakeStore API</a> - Produse e-commerce</li>
                <li><a href="https://jsonplaceholder.typicode.com" target="_blank">JSONPlaceholder</a> - PostƒÉri, comentarii, utilizatori</li>
                <li><a href="https://pokeapi.co" target="_blank">Pok√©API</a> - Date despre Pok√©mon</li>
                <li><a href="https://open-meteo.com" target="_blank">Open-Meteo</a> - Date meteo</li>
                <li><a href="https://restcountries.com" target="_blank">REST Countries</a> - Informa»õii despre »õƒÉri</li>
            </ul>

        </article>
    </main>

    <script src="app.js"></script>
</body>
</html>