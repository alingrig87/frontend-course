<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LecÈ›ie: Working with APIs</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <aside class="sidebar">
        <h2>Capitol 19: Working with APIs</h2>
        <nav class="side-nav">
            <ul>
                <li><a href="#api-intro" class="nav-link active">Ce este un API</a></li>
                <li><a href="#json-basics" class="nav-link">JSON basics</a></li>
                <li><a href="#fetch-advanced" class="nav-link">Fetch API avansat</a></li>
                <li><a href="#request-methods" class="nav-link">Request methods (GET, POST, PUT, DELETE)</a></li>
                <li><a href="#headers-body" class="nav-link">Headers È™i Body</a></li>
                <li><a href="#api-auth" class="nav-link">API Key & autentificare</a></li>
                <li><a href="#workshop-products" class="nav-link">Workshop: API de produse</a></li>
                <li><a href="#workshop-weather" class="nav-link">Workshop: API meteo</a></li>
                <li><a href="#homework" class="nav-link">Tema: aplicaÈ›ie completÄƒ cu API</a></li>
            </ul>
        </nav>
    </aside>

    <main class="main-content">
        <header>
            <h1>Working with APIs</h1>
            <p>Ãn acest capitol vom explora cum funcÈ›ioneazÄƒ API-urile È™i cum pot fi folosite Ã®n aplicaÈ›iile web moderne.</p>
        </header>

        <article id="api-intro">
            <h2>Ce este un API?</h2>
            <p>
                Un <strong>API (Application Programming Interface)</strong> este o interfaÈ›Äƒ care permite aplicaÈ›iilor
                sÄƒ comunice Ã®ntre ele. Practic, un API oferÄƒ un set de reguli È™i endpoint-uri prin care o aplicaÈ›ie
                poate cere sau trimite date cÄƒtre un server.
            </p>

            <pre>GET https://api.exemplu.com/products</pre>

            <p>
                RÄƒspunsul este, de obicei, Ã®n format <code>JSON</code>, un format text uÈ™or de citit È™i prelucrat Ã®n JavaScript.
            </p>

            <div class="info-box">
                <strong>ğŸ’¡ Exemplu real:</strong> CÃ¢nd foloseÈ™ti o aplicaÈ›ie meteo, ea comunicÄƒ cu un API pentru a obÈ›ine temperatura curentÄƒ.
            </div>
        </article>

        <article id="json-basics">
            <h2>JSON Basics</h2>
            <p>
                <strong>JSON (JavaScript Object Notation)</strong> este formatul standard pentru schimbul de date Ã®ntre client È™i server.
            </p>

            <h3>Structura JSON</h3>
            <pre>{
  "nume": "Ion Popescu",
  "varsta": 25,
  "activ": true,
  "skills": ["JavaScript", "React", "Node.js"],
  "adresa": {
    "oras": "BucureÈ™ti",
    "strada": "Calea Victoriei"
  }
}</pre>

            <h3>Conversii JSON Ã®n JavaScript</h3>
            <pre>// Convertire string JSON Ã®n obiect JavaScript
const jsonString = '{"nume": "Maria", "varsta": 30}';
const obiect = JSON.parse(jsonString);

// Convertire obiect JavaScript Ã®n string JSON
const data = { nume: "Alex", varsta: 28 };
const json = JSON.stringify(data);</pre>
        </article>

        <article id="fetch-advanced">
            <h2>Fetch API Avansat</h2>
            <p>
                <code>fetch()</code> este funcÈ›ia modernÄƒ pentru a face cereri HTTP Ã®n JavaScript. ReturneazÄƒ un <strong>Promise</strong>.
            </p>

            <h3>Sintaxa de bazÄƒ</h3>
            <pre>fetch('https://api.exemplu.com/data')
  .then(response => response.json())
  .then(data => console.log(data))
  .catch(error => console.error('Eroare:', error));</pre>

            <h3>Folosind async/await</h3>
            <pre>async function getData() {
  try {
    const response = await fetch('https://api.exemplu.com/data');
    const data = await response.json();
    console.log(data);
  } catch (error) {
    console.error('Eroare:', error);
  }
}</pre>

            <div class="warning-box">
                <strong>âš ï¸ AtenÈ›ie:</strong> Ãntotdeauna verificÄƒ dacÄƒ cererea a avut succes folosind <code>response.ok</code> sau <code>response.status</code>.
            </div>
        </article>

        <article id="request-methods">
            <h2>Request Methods (GET, POST, PUT, DELETE)</h2>
            
            <h3>GET - ObÈ›inere date</h3>
            <pre>fetch('https://api.exemplu.com/products/1')
  .then(response => response.json())
  .then(data => console.log(data));</pre>

            <h3>POST - Crearea unei resurse noi</h3>
            <pre>fetch('https://api.exemplu.com/products', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    nume: 'Produs Nou',
    pret: 99.99
  })
})
  .then(response => response.json())
  .then(data => console.log(data));</pre>

            <h3>PUT - Actualizare completÄƒ</h3>
            <pre>fetch('https://api.exemplu.com/products/1', {
  method: 'PUT',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    nume: 'Produs Actualizat',
    pret: 149.99
  })
});</pre>

            <h3>DELETE - È˜tergere resursÄƒ</h3>
            <pre>fetch('https://api.exemplu.com/products/1', {
  method: 'DELETE'
})
  .then(response => console.log('È˜ters cu succes'));</pre>
        </article>

        <article id="headers-body">
            <h2>Headers È™i Body</h2>
            
            <h3>Headers (Anteturi)</h3>
            <p>Headers conÈ›in metadate despre cerere, cum ar fi tipul de conÈ›inut sau token-uri de autentificare.</p>
            
            <pre>fetch('https://api.exemplu.com/data', {
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer token123',
    'Accept': 'application/json'
  }
});</pre>

            <h3>Body (Corp cerere)</h3>
            <p>Body-ul conÈ›ine datele efective care sunt trimise cÄƒtre server Ã®n metodele POST, PUT sau PATCH.</p>
            
            <pre>const userData = {
  username: 'ion_popescu',
  email: 'ion@exemplu.com',
  password: 'parola123'
};

fetch('https://api.exemplu.com/register', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(userData)
});</pre>
        </article>

        <article id="api-auth">
            <h2>API Key & Autentificare</h2>
            
            <p>Multe API-uri necesitÄƒ o <strong>cheie API (API Key)</strong> pentru a valida È™i limita accesul.</p>

            <h3>Tipuri de autentificare</h3>
            <ul>
                <li><strong>API Key Ã®n URL:</strong> <code>?api_key=abc123</code></li>
                <li><strong>API Key Ã®n Header:</strong> <code>X-API-Key: abc123</code></li>
                <li><strong>Bearer Token:</strong> <code>Authorization: Bearer token123</code></li>
                <li><strong>Basic Auth:</strong> Username È™i parolÄƒ encodate Ã®n Base64</li>
            </ul>

            <h3>Exemplu cu API Key</h3>
            <pre>const apiKey = 'abc123xyz';

fetch(`https://api.exemplu.com/data?api_key=${apiKey}`)
  .then(response => response.json())
  .then(data => console.log(data));</pre>

            <h3>Exemplu cu Bearer Token</h3>
            <pre>const token = 'your_token_here';

fetch('https://api.exemplu.com/protected', {
  headers: {
    'Authorization': `Bearer ${token}`
  }
})
  .then(response => response.json())
  .then(data => console.log(data));</pre>

            <div class="warning-box">
                <strong>âš ï¸ Securitate:</strong> Nu expune niciodatÄƒ cheia API Ã®n cod client public. FoloseÈ™te variabile de mediu sau un backend intermediar.
            </div>
        </article>

        <article id="workshop-products">
            <h2>Workshop: API de Produse</h2>
            <p>Vom folosi API-ul public <strong>FakeStore API</strong> pentru a obÈ›ine È™i afiÈ™a produse.</p>

            <div class="demo-box">
        <h4>Demo Interactiv - Produse</h4>

        <div class="controls">
          <div class="control-row">
            <button id="getProducts" class="btn-primary">ObÈ›ine toate produsele (limit 5)</button>
            <div class="hint">AfiÈ™eazÄƒ o listÄƒ de produse de test. FoloseÈ™te pentru a vedea structura rÄƒspunsului.</div>
          </div>

          <div class="control-row">
            <label for="productId" class="sr-only">ID produs</label>
            <input type="number" id="productId" placeholder="ID produs (ex: 1)" value="1" min="1" max="20">
            <button id="getProduct" class="btn-secondary">ObÈ›ine produsul</button>
            <div class="hint">Introdu un ID È™i apasÄƒ pentru a vedea detaliile acelui produs.</div>
          </div>

          <div class="control-row">
            <button id="getCategories" class="btn-primary">ObÈ›ine categorii</button>
            <select id="categorySelect">
              <option value="">SelecteazÄƒ categorie</option>
            </select>
            <button id="getByCategory" class="btn-secondary">FiltreazÄƒ</button>
            <div class="hint">PoÈ›i popula mai Ã®ntÃ¢i lista de categorii, apoi filtra produsele dupÄƒ categorie selectatÄƒ.</div>
          </div>
        </div>

        <div class="result-box">
          <h5>Rezultate</h5>
          <div id="result" class="result-content">Rezultatul va apÄƒrea aici dupÄƒ ce apeÈ™i un buton.</div>
        </div>
            </div>

            <h3>Cod sursÄƒ</h3>
            <pre>// ObÈ›ine toate produsele
async function getAllProducts() {
  const response = await fetch('https://fakestoreapi.com/products');
  const products = await response.json();
  console.log(products);
}

// ObÈ›ine un produs specific
async function getProduct(id) {
  const response = await fetch(`https://fakestoreapi.com/products/${id}`);
  const product = await response.json();
  console.log(product);
}

// ObÈ›ine produse dupÄƒ categorie
async function getProductsByCategory(category) {
  const response = await fetch(
    `https://fakestoreapi.com/products/category/${category}`
  );
  const products = await response.json();
  console.log(products);
}</pre>
        </article>

        <article id="workshop-weather">
            <h2>Workshop: API Meteo</h2>
            <p>Vom folosi <strong>Open-Meteo API</strong> (nu necesitÄƒ cheie API) pentru a obÈ›ine datele meteo.</p>

            <div class="demo-box">
                <h4>Demo Interactiv - Meteo</h4>
        <input type="text" id="city" placeholder="OraÈ™ (ex: BucureÈ™ti)" value="">
        <div style="margin:0.25rem 0; color:#4a5568; font-size:0.9rem">Sau foloseÈ™te coordonate:</div>
        <input type="text" id="latitude" placeholder="Latitudine" value="44.4268">
        <input type="text" id="longitude" placeholder="Longitudine" value="26.1025">
        <button id="getWeather">ObÈ›ine meteo</button>
                <div id="result2"></div>
            </div>

            <h3>Cod sursÄƒ</h3>
            <pre>async function getWeather(lat, lon) {
  const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`;
  
  try {
    const response = await fetch(url);
    const data = await response.json();
    
    const weather = data.current_weather;
    console.log(`TemperaturÄƒ: ${weather.temperature}Â°C`);
    console.log(`VitezÄƒ vÃ¢nt: ${weather.windspeed} km/h`);
  } catch (error) {
    console.error('Eroare:', error);
  }
}</pre>
        </article>

        <article id="homework">
            <h2>Tema: AplicaÈ›ie CompletÄƒ cu API</h2>
            
            <h3>CerinÈ›e</h3>
            <p>CreeazÄƒ o aplicaÈ›ie web care foloseÈ™te un API public È™i implementeazÄƒ urmÄƒtoarele funcÈ›ionalitÄƒÈ›i:</p>
            
            <ul>
                <li>AfiÈ™are listÄƒ de date (produse, utilizatori, postÄƒri, etc.)</li>
                <li>CÄƒutare È™i filtrare dupÄƒ criterii</li>
                <li>AfiÈ™are detalii pentru un element selectat</li>
                <li>Design responsive È™i atractiv</li>
                <li>Gestionare erori (loading, mesaje de eroare)</li>
                <li>Bonus: Implementare POST/PUT/DELETE dacÄƒ API-ul permite</li>
            </ul>

            <h3>API-uri publice recomandate</h3>
            <ul>
                <li><a href="https://fakestoreapi.com" target="_blank">FakeStore API</a> - Produse e-commerce</li>
                <li><a href="https://jsonplaceholder.typicode.com" target="_blank">JSONPlaceholder</a> - PostÄƒri, comentarii, utilizatori</li>
                <li><a href="https://pokeapi.co" target="_blank">PokÃ©API</a> - Date despre PokÃ©mon</li>
                <li><a href="https://open-meteo.com" target="_blank">Open-Meteo</a> - Date meteo</li>
                <li><a href="https://restcountries.com" target="_blank">REST Countries</a> - InformaÈ›ii despre È›Äƒri</li>
            </ul>

        </article>
    </main>

    <script src="app.js"></script>
</body>
</html>